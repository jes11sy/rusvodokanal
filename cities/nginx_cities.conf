worker_processes auto;

events {
    worker_connections 1024;
}

http {
    include mime.types;
    default_type application/octet-stream;

    sendfile on;
    keepalive_timeout 65;

    gzip on;
    gzip_types
        text/plain
        text/css
        application/javascript
        application/json
        application/xml
        image/svg+xml;

    # Саратов
    server {
        listen 80;
        server_name sar.rusvodokanal.ru;

        root /var/www/cities/sar;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
    # Энгельс
    server {
        listen 80;
        server_name eng.rusvodokanal.ru;

        root /var/www/cities/eng;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
    # Ульяновск
    server {
        listen 80;
        server_name uly.rusvodokanal.ru;

        root /var/www/cities/uly;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
    # Тольятти
    server {
        listen 80;
        server_name tol.rusvodokanal.ru;

        root /var/www/cities/tol;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
    # Пенза
    server {
        listen 80;
        server_name pnz.rusvodokanal.ru;

        root /var/www/cities/pnz;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
    # Ярославль
    server {
        listen 80;
        server_name yar.rusvodokanal.ru;

        root /var/www/cities/yar;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
    # Омск
    server {
        listen 80;
        server_name oms.rusvodokanal.ru;

        root /var/www/cities/oms;
        index index.html;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location = /robots.txt {
            try_files /robots.txt =404;
            add_header Content-Type text/plain;
        }

        location = /sitemap.xml {
            try_files /sitemap.xml =404;
            add_header Content-Type application/xml;
        }

        location ~* \.(?:css|js|jpg|jpeg|png|gif|svg|webp|ico|woff2?)$ {
            expires 7d;
            add_header Cache-Control "public";
        }

        error_page 404 /404.html;
    }
}
